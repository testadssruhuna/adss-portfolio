<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ADSS Member Portfolio System</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">

  <!-- Header -->
  <header class="text-center mb-6">
    <h1 class="text-3xl font-bold text-blue-600">ADSS Member Portfolio System</h1>
  </header>

  <!-- Admin Login -->
  <section class="bg-white shadow-lg rounded-2xl p-6 max-w-md mx-auto mb-8">
    <h2 class="text-xl font-semibold mb-4">Admin Login</h2>
    <input id="adminUser" type="text" placeholder="Username" class="w-full p-2 border rounded mb-3">
    <input id="adminPass" type="password" placeholder="Password" class="w-full p-2 border rounded mb-3">
    <button onclick="adminLogin()" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Login</button>
  </section>

  <!-- Forms Section -->
  <div id="formsSection" class="hidden">

    <!-- Create Profile -->
    <section class="bg-white shadow-md rounded-2xl p-6 mb-8">
      <h2 class="text-lg font-bold mb-4">Create Member Profile</h2>
      <input id="profileName" type="text" placeholder="Name" class="w-full p-2 border rounded mb-3">
      <input id="profileIndex" type="text" placeholder="Index Number" class="w-full p-2 border rounded mb-3">
      <button id="createProfile" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Create Profile</button>
    </section>

    <!-- OC Contribution Form -->
    <section class="bg-white shadow-md rounded-2xl p-6 mb-8">
      <h2 class="text-lg font-bold mb-4">OC Contribution</h2>
      <input id="ocEvent" type="text" placeholder="Event Name" class="w-full p-2 border rounded mb-3">
      <input id="ocDate" type="date" class="w-full p-2 border rounded mb-3">
      <input id="ocIndex" type="text" placeholder="Index Number" class="w-full p-2 border rounded mb-3">
      <input id="ocPosition" type="text" placeholder="Hold OC Position" class="w-full p-2 border rounded mb-3">
      <button id="submitOC" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Submit</button>
    </section>

    <!-- Executive Board Position Form -->
    <section class="bg-white shadow-md rounded-2xl p-6 mb-8">
      <h2 class="text-lg font-bold mb-4">Executive Board Position</h2>
      <input id="ebPosition" type="text" placeholder="Position" class="w-full p-2 border rounded mb-3">
      <input id="ebIndex" type="text" placeholder="Index Number" class="w-full p-2 border rounded mb-3">
      <input id="ebStart" type="date" class="w-full p-2 border rounded mb-3">
      <input id="ebEnd" type="date" class="w-full p-2 border rounded mb-3">
      <button id="submitEB" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Submit</button>
    </section>

    <!-- Team Membership Form -->
    <section class="bg-white shadow-md rounded-2xl p-6 mb-8">
      <h2 class="text-lg font-bold mb-4">Team Membership</h2>
      <input id="teamIndex" type="text" placeholder="Index Number" class="w-full p-2 border rounded mb-3">
      <input id="teamName" type="text" placeholder="Team Name" class="w-full p-2 border rounded mb-3">
      <button id="submitTeam" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Submit</button>
    </section>

    <!-- Search Profile -->
    <section class="bg-white shadow-md rounded-2xl p-6 mb-8">
      <h2 class="text-lg font-bold mb-4">Search Profile</h2>
      <input id="searchIndex" type="text" placeholder="Enter Index Number" class="w-full p-2 border rounded mb-3">
      <button id="searchBtn" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Search</button>
      <div id="profileResult" class="mt-4"></div>
    </section>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js"></script>

  <script>
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAImYyXHl6LK994C-qdFtQV_EZk1KmA48U",
  authDomain: "adss-portfolio.firebaseapp.com",
  projectId: "adss-portfolio",
  storageBucket: "adss-portfolio.firebasestorage.app",
  messagingSenderId: "330720882784",
  appId: "1:330720882784:web:81ef2e038a44393fb71305",
  measurementId: "G-64NCP3SVRG"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

    // Admin login
    function adminLogin() {
      let user = document.getElementById("adminUser").value;
      let pass = document.getElementById("adminPass").value;
      if(user === "admin" && pass === "1234"){
        document.getElementById("formsSection").classList.remove("hidden");
        alert("Login Successful!");
      } else {
        alert("Invalid Credentials");
      }
    }

    // Create Profile
    document.getElementById("createProfile").addEventListener("click", async () => {
      const name = document.getElementById("profileName").value;
      const index = document.getElementById("profileIndex").value;
      await db.collection("profiles").doc(index).set({
        name: name,
        indexNo: index
      });
      alert("Profile Created!");
    });

    // OC Contribution
    document.getElementById("submitOC").addEventListener("click", async () => {
      await db.collection("oc_contributions").add({
        eventName: document.getElementById("ocEvent").value,
        date: document.getElementById("ocDate").value,
        indexNo: document.getElementById("ocIndex").value,
        position: document.getElementById("ocPosition").value,
        timestamp: new Date()
      });
      alert("OC Contribution Saved!");
    });

    // Executive Board
    document.getElementById("submitEB").addEventListener("click", async () => {
      await db.collection("executive_board").add({
        position: document.getElementById("ebPosition").value,
        indexNo: document.getElementById("ebIndex").value,
        startDate: document.getElementById("ebStart").value,
        endDate: document.getElementById("ebEnd").value,
        timestamp: new Date()
      });
      alert("Executive Board Position Saved!");
    });

    // Team Membership
    document.getElementById("submitTeam").addEventListener("click", async () => {
      await db.collection("team_memberships").add({
        indexNo: document.getElementById("teamIndex").value,
        teamName: document.getElementById("teamName").value,
        timestamp: new Date()
      });
      alert("Team Membership Saved!");
    });

    // Search Profile
    document.getElementById("searchBtn").addEventListener("click", async () => {
      const index = document.getElementById("searchIndex").value;
      let resultDiv = document.getElementById("profileResult");
      resultDiv.innerHTML = "";

      // Basic profile
      const profileDoc = await db.collection("profiles").doc(index).get();
      if(profileDoc.exists) {
        resultDiv.innerHTML += `<h3 class="font-bold text-lg">Profile: ${profileDoc.data().name} (${index})</h3>`;
      }

      // OC
      const ocSnap = await db.collection("oc_contributions").where("indexNo", "==", index).get();
      ocSnap.forEach(doc => {
        let data = doc.data();
        resultDiv.innerHTML += `<p><b>OC:</b> ${data.eventName} (${data.date}) - ${data.position}</p>`;
      });

      // EB
      const ebSnap = await db.collection("executive_board").where("indexNo", "==", index).get();
      ebSnap.forEach(doc => {
        let data = doc.data();
        resultDiv.innerHTML += `<p><b>Exec Board:</b> ${data.position} (${data.startDate} â†’ ${data.endDate})</p>`;
      });

      // Teams
      const teamSnap = await db.collection("team_memberships").where("indexNo", "==", index).get();
      teamSnap.forEach(doc => {
        let data = doc.data();
        resultDiv.innerHTML += `<p><b>Team:</b> ${data.teamName}</p>`;
      });
    });
  </script>
</body>
</html>

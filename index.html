<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ADSS Member Profiles</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module">
    // Firebase SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // 🔹 Replace with your Firebase config
    // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAImYyXHl6LK994C-qdFtQV_EZk1KmA48U",
  authDomain: "adss-portfolio.firebaseapp.com",
  projectId: "adss-portfolio",
  storageBucket: "adss-portfolio.firebasestorage.app",
  messagingSenderId: "330720882784",
  appId: "1:330720882784:web:81ef2e038a44393fb71305",
  measurementId: "G-64NCP3SVRG"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

    // 🔹 Hardcoded Admin Login
    window.loginAdmin = () => {
      const username = document.getElementById("adminUser").value;
      const password = document.getElementById("adminPass").value;

      if (username === "admin" && password === "1234") {
        document.getElementById("loginSection").classList.add("hidden");
        document.getElementById("adminSection").classList.remove("hidden");
      } else {
        alert("❌ Invalid login. Try again!");
      }
    };

    // 🔹 Save OC Contribution
    window.saveOC = async () => {
      const index = document.getElementById("ocIndex").value;
      const eventName = document.getElementById("eventName").value;
      const date = document.getElementById("eventDate").value;
      const position = document.getElementById("ocPosition").value;

      await addDoc(collection(db, "oc_contributions"), {
        index, eventName, date, position
      });
      alert("✅ OC Contribution saved!");
    };

    // 🔹 Save Exec Board Position
    window.saveExec = async () => {
      const index = document.getElementById("execIndex").value;
      const position = document.getElementById("execPosition").value;
      const startDate = document.getElementById("execStart").value;
      const endDate = document.getElementById("execEnd").value;

      await addDoc(collection(db, "executive_positions"), {
        index, position, startDate, endDate
      });
      alert("✅ Executive Position saved!");
    };

    // 🔹 Save Member Team
    window.saveTeam = async () => {
      const index = document.getElementById("teamIndex").value;
      const teamName = document.getElementById("teamName").value;

      await addDoc(collection(db, "team_members"), { index, teamName });
      alert("✅ Team membership saved!");
    };

    // 🔹 Search Profile
    window.searchProfile = async () => {
      const index = document.getElementById("searchIndex").value;
      let resultHTML = "";

      // OC Contributions
      const ocQuery = query(collection(db, "oc_contributions"), where("index", "==", index));
      const ocSnap = await getDocs(ocQuery);
      resultHTML += `<h3 class='font-bold text-lg'>OC Contributions</h3>`;
      ocSnap.forEach(doc => {
        const d = doc.data();
        resultHTML += `<p>📌 ${d.eventName} (${d.date}) - ${d.position}</p>`;
      });

      // Executive Positions
      const execQuery = query(collection(db, "executive_positions"), where("index", "==", index));
      const execSnap = await getDocs(execQuery);
      resultHTML += `<h3 class='font-bold text-lg mt-4'>Executive Positions</h3>`;
      execSnap.forEach(doc => {
        const d = doc.data();
        resultHTML += `<p>👔 ${d.position} (${d.startDate} → ${d.endDate})</p>`;
      });

      // Team Memberships
      const teamQuery = query(collection(db, "team_members"), where("index", "==", index));
      const teamSnap = await getDocs(teamQuery);
      resultHTML += `<h3 class='font-bold text-lg mt-4'>Team Memberships</h3>`;
      teamSnap.forEach(doc => {
        const d = doc.data();
        resultHTML += `<p>🤝 ${d.teamName}</p>`;
      });

      document.getElementById("profileResult").innerHTML = resultHTML || "No records found.";
    };
  </script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-3xl font-bold text-blue-600 mb-6">ADSS Member Profile System</h1>

  <!-- Login -->
  <div id="loginSection" class="bg-white p-6 rounded-xl shadow-lg w-full max-w-md">
    <h2 class="text-xl font-bold mb-4">🔐 Admin Login</h2>
    <input id="adminUser" type="text" placeholder="Username" class="w-full p-2 border rounded mb-2"/>
    <input id="adminPass" type="password" placeholder="Password" class="w-full p-2 border rounded mb-2"/>
    <button onclick="loginAdmin()" class="bg-blue-600 text-white px-4 py-2 rounded w-full">Login</button>
  </div>

  <!-- Admin Section -->
  <div id="adminSection" class="hidden w-full max-w-3xl space-y-6 mt-6">

    <!-- OC Form -->
    <div class="bg-white p-6 rounded-xl shadow-md">
      <h2 class="text-xl font-bold mb-4">📝 Add OC Contribution</h2>
      <input id="ocIndex" placeholder="Index Number" class="w-full p-2 border rounded mb-2"/>
      <input id="eventName" placeholder="Event Name" class="w-full p-2 border rounded mb-2"/>
      <input id="eventDate" type="date" class="w-full p-2 border rounded mb-2"/>
      <input id="ocPosition" placeholder="OC Position" class="w-full p-2 border rounded mb-2"/>
      <button onclick="saveOC()" class="bg-green-600 text-white px-4 py-2 rounded">Save</button>
    </div>

    <!-- Executive Form -->
    <div class="bg-white p-6 rounded-xl shadow-md">
      <h2 class="text-xl font-bold mb-4">👔 Add Executive Position</h2>
      <input id="execIndex" placeholder="Index Number" class="w-full p-2 border rounded mb-2"/>
      <input id="execPosition" placeholder="Position" class="w-full p-2 border rounded mb-2"/>
      <input id="execStart" type="date" class="w-full p-2 border rounded mb-2"/>
      <input id="execEnd" type="date" class="w-full p-2 border rounded mb-2"/>
      <button onclick="saveExec()" class="bg-green-600 text-white px-4 py-2 rounded">Save</button>
    </div>

    <!-- Team Form -->
    <div class="bg-white p-6 rounded-xl shadow-md">
      <h2 class="text-xl font-bold mb-4">🤝 Add Team Membership</h2>
      <input id="teamIndex" placeholder="Index Number" class="w-full p-2 border rounded mb-2"/>
      <input id="teamName" placeholder="Team Name" class="w-full p-2 border rounded mb-2"/>
      <button onclick="saveTeam()" class="bg-green-600 text-white px-4 py-2 rounded">Save</button>
    </div>
  </div>

  <!-- Search Profile -->
  <div class="bg-white p-6 rounded-xl shadow-md mt-6 w-full max-w-3xl">
    <h2 class="text-xl font-bold mb-4">🔎 Search Member Profile</h2>
    <input id="searchIndex" placeholder="Enter Index Number" class="w-full p-2 border rounded mb-2"/>
    <button onclick="searchProfile()" class="bg-blue-600 text-white px-4 py-2 rounded">Search</button>
    <div id="profileResult" class="mt-4 text-gray-800"></div>
  </div>

</body>
</html>
